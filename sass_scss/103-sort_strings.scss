@import '103-sort_list';

@function sort-list($list) {
  $sorted: ();
  
  @while length($list) > 0 {
    $min: nth($list, 1);
    $min-index: 1;
    
    @for $i from 2 through length($list) {
      $current: nth($list, $i);
      @if compare-strings($current, $min) < 0 {
        $min: $current;
        $min-index: $i;
      }
    }
    
    $sorted: append($sorted, $min);
    $new-list: ();
    
    @for $i from 1 through length($list) {
      @if $i != $min-index {
        $new-list: append($new-list, nth($list, $i));
      }
    }
    
    $list: $new-list;
  }
  
  @return $sorted;
}

@function compare-strings($str1, $str2) {
  $str1: to-lower-case($str1 + "");
  $str2: to-lower-case($str2 + "");
  
  $len1: str-length($str1);
  $len2: str-length($str2);
  $min-len: if($len1 < $len2, $len1, $len2);
  
  @for $i from 1 through $min-len {
    $char1: str-slice($str1, $i, $i);
    $char2: str-slice($str2, $i, $i);
    
    @if $char1 != $char2 {
      $code1: char-to-number($char1);
      $code2: char-to-number($char2);
      @return $code1 - $code2;
    }
  }
  
  @return $len1 - $len2;
}

@function char-to-number($char) {
  $chars: "abcdefghijklmnopqrstuvwxyz";
  $index: str-index($chars, $char);
  @return if($index, $index, 999);
}

$sorted-list: sort-list($list_to_sort);
@debug $sorted-list;