@import '103-sort_list';

@function sort-strings($list) {
  $result: ();
  $remaining: $list;
  
  @while length($remaining) > 0 {
    $smallest: nth($remaining, 1);
    $smallest-index: 1;
    
    @for $i from 2 through length($remaining) {
      $current: nth($remaining, $i);
      @if alphabetical-compare($current, $smallest) {
        $smallest: $current;
        $smallest-index: $i;
      }
    }
    
    $result: append($result, $smallest);
    $new-remaining: ();
    
    @for $i from 1 through length($remaining) {
      @if $i != $smallest-index {
        $new-remaining: append($new-remaining, nth($remaining, $i));
      }
    }
    
    $remaining: $new-remaining;
  }
  
  @return $result;
}

@function alphabetical-compare($str1, $str2) {
  $s1: to-lower-case(#{$str1});
  $s2: to-lower-case(#{$str2});
  
  $len1: str-length($s1);
  $len2: str-length($s2);
  $max-len: if($len1 > $len2, $len1, $len2);
  
  @for $i from 1 through $max-len {
    $char1: if($i <= $len1, str-slice($s1, $i, $i), "");
    $char2: if($i <= $len2, str-slice($s2, $i, $i), "");
    
    @if $char1 != $char2 {
      @return get-char-value($char1) < get-char-value($char2);
    }
  }
  
  @return $len1 < $len2;
}

@function get-char-value($char) {
  $alphabet: "abcdefghijklmnopqrstuvwxyz";
  $index: str-index($alphabet, $char);
  @return if($index, $index, 999);
}

$sorted: sort-strings($list_to_sort);
@debug $sorted;